<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel do Decorador - Up.Baloes</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../Images/favicon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="../Images/favicon.ico">
    <link rel="apple-touch-icon" href="../Images/favicon.ico">
    
    <!-- Font Awesome para ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- TailwindCSS para estilos -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FullCalendar CSS -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css" rel="stylesheet">
    
    <!-- CSS personalizado -->
    <link rel="stylesheet" href="../css/estilos.css">
    <link rel="stylesheet" href="../css/painel-decorador.css">
</head>
<body class="bg-gray-50">
    
    <!-- Verificação de Autenticação Decorador -->
    <script>
        // Verificar se o usuário é decorador
        const userData = JSON.parse(localStorage.getItem('userData') || '{}');
        if (userData.role !== 'decorator') {
            window.location.replace('login.html');
        }
    </script>
    
    <!-- Script de Proteção de Autenticação -->
    <script src="../js/auth-protection.js"></script>
    <script>
        // Proteger página de decorador contra navegação não autorizada
        (async function() {
            if (window.authProtection) {
                const isProtected = await window.authProtection.protectDecoratorPage();
                if (isProtected) {
                    window.authProtection.protectBrowserNavigation('decorator');
                }
            }
        })();
    </script>
    
    <!-- Sidebar Fixo -->
    <div id="sidebar" class="fixed left-0 top-0 h-full w-64 bg-white shadow-xl transform -translate-x-full transition-transform duration-300 ease-in-out z-50 lg:translate-x-0">
        
        <!-- Header do Sidebar -->
        <div class="flex items-center justify-between p-6 border-b border-gray-200">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 rounded-full overflow-hidden bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg">
                    <img src="../Images/Logo System.jpeg" alt="Up.Baloes Logo" class="w-full h-full object-cover rounded-full">
                </div>
                <div>
                    <h2 class="text-lg font-bold text-gray-800">Up.Baloes</h2>
                    <p class="text-xs text-gray-500">Decorador</p>
                </div>
            </div>
            <button id="close-sidebar" class="lg:hidden text-gray-500 hover:text-gray-700 transition-colors duration-200">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>

        <!-- Navegação Principal -->
        <nav class="flex-1 px-4 py-6 space-y-2">
            
            <!-- Navegação Principal -->
            <div class="nav-section">
                <a href="#painel-gerencial" class="nav-item active" data-module="painel-gerencial">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Painel Gerencial</span>
                </a>
                
                <a href="#personalizar-tela" class="nav-item" data-module="personalizar-tela">
                    <i class="fas fa-palette"></i>
                    <span>Personalizar Tela Inicial</span>
                </a>
                
                <a href="#portfolio" class="nav-item" data-module="portfolio">
                    <i class="fas fa-briefcase"></i>
                    <span>Portfólio</span>
                </a>
                
                <a href="#agenda" class="nav-item" data-module="agenda">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Gerenciar Agenda</span>
                </a>
                
                <a href="#dashboard" class="nav-item" data-module="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
            </div>

            <!-- Configurações -->
            <div class="nav-section mt-8">
                <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3">Configurações</h3>
                
                <a href="#account" class="nav-item" data-module="account">
                    <i class="fas fa-user-cog"></i>
                    <span>Gerenciar Conta</span>
                </a>
            </div>
        </nav>

        <!-- Footer do Sidebar -->
        <div class="border-t border-gray-200 p-4">
            <button id="logout-btn" class="w-full flex items-center space-x-3 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200">
                <i class="fas fa-sign-out-alt"></i>
                <span>Sair</span>
            </button>
        </div>
    </div>

    <!-- Overlay para Mobile -->
    <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden lg:hidden"></div>

    <!-- Conteúdo Principal -->
    <div class="lg:ml-64 min-h-screen">
        
        <!-- Header Superior -->
        <header class="bg-white shadow-sm border-b border-gray-200 px-4 py-4 lg:px-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button id="menu-toggle" class="lg:hidden text-gray-600 hover:text-gray-900 transition-colors duration-200">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <h1 class="text-2xl font-bold text-gray-800" id="page-title">Painel Gerencial</h1>
                </div>
                
                <div class="flex items-center space-x-4">
                    <!-- Botão de Suporte -->
                    <button id="support-btn" class="relative p-2 text-gray-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors duration-200" title="Relatar Problema">
                        <i class="fas fa-headset text-lg"></i>
                    </button>
                    
                    <!-- Notificações -->
                    <div class="relative">
                        <button id="notifications-btn" class="relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors duration-200">
                            <i class="fas fa-bell text-lg"></i>
                            <span id="notification-count" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
                        </button>
                        
                        <!-- Dropdown de Notificações -->
                        <div id="notifications-dropdown" class="absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-200 opacity-0 invisible transition-all duration-200 transform translate-y-2 z-50">
                            <div class="p-4 border-b border-gray-200">
                                <h3 class="text-lg font-semibold text-gray-800">Notificações</h3>
                                <p class="text-sm text-gray-500">Orçamentos recebidos recentemente</p>
                            </div>
                            <div id="notifications-list" class="max-h-96 overflow-y-auto">
                                <!-- Lista de notificações será carregada aqui -->
                            </div>
                            <div class="p-4 border-t border-gray-200">
                                <button id="view-all-budgets" class="w-full text-center text-blue-600 hover:text-blue-800 text-sm font-medium">
                                    Ver todos os orçamentos
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Perfil Rápido -->
                    <div class="relative">
                        <button id="user-btn" class="flex items-center space-x-2 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors duration-200">
                            <div class="w-8 h-8 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-user text-white text-sm"></i>
                            </div>
                            <span class="hidden sm:block text-sm font-medium" id="user-display-name">--</span>
                            <i class="fas fa-chevron-down text-xs"></i>
                        </button>
                        
                        <!-- Dropdown do Usuário -->
                        <div id="user-dropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-gray-200 opacity-0 invisible transition-all duration-200 transform translate-y-2 z-50">
                            <div class="py-2">
                                <a href="#admin" id="admin-panel-btn" class="dropdown-item flex items-center px-4 py-2 text-purple-600 hover:bg-purple-50 transition-colors duration-200 hidden">
                                    <i class="fas fa-crown mr-3"></i>
                                    Painel Admin
                                </a>
                                <button id="logout-header-btn" class="w-full text-left dropdown-item flex items-center px-4 py-2 text-red-600 hover:bg-red-50 transition-colors duration-200">
                                    <i class="fas fa-sign-out-alt mr-3"></i>
                                    Logout
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Conteúdo da Página -->
        <main class="p-4 lg:p-6">
            
            <!-- Módulo Dashboard -->
            <div id="dashboard-module" class="module-content hidden">
                <!-- Filtros do Dashboard -->
                <div class="bg-white rounded-xl shadow-sm mb-6">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h2 class="text-xl font-semibold text-gray-800">Dashboard do Decorador</h2>
                        <p class="text-sm text-gray-600 mt-1">Visualize suas estatísticas e métricas de negócio</p>
                    </div>
                    
                    <!-- Filtros de Período -->
                    <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Data Inicial</label>
                                <input type="date" id="dashboard-date-from" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Data Final</label>
                                <input type="date" id="dashboard-date-to" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            
                            <div class="flex items-end">
                                <button id="apply-dashboard-filters" class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200">
                                    <i class="fas fa-filter mr-2"></i>Atualizar Dashboard
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Cards de KPIs -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6 mb-8">
                    <!-- Total de Festas -->
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-xl shadow-sm">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-blue-600">Total de Festas</p>
                                <p class="text-3xl font-bold text-blue-800" id="kpi-festas-total">0</p>
                                <p class="text-xs text-blue-600 mt-1" id="kpi-festas-total-period">no período</p>
                            </div>
                            <i class="fas fa-birthday-cake text-3xl text-blue-500"></i>
                        </div>
                    </div>
                    
                    <!-- Festas Solicitadas por Clientes -->
                    <div class="bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-xl shadow-sm">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-green-600">Solicitadas por Clientes</p>
                                <p class="text-3xl font-bold text-green-800" id="kpi-festas-clientes">0</p>
                                <p class="text-xs text-green-600 mt-1">via site/app</p>
                            </div>
                            <i class="fas fa-user-plus text-3xl text-green-500"></i>
                        </div>
                    </div>
                    
                    <!-- Festas Criadas pelo Decorador -->
                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-xl shadow-sm">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-purple-600">Criadas pelo Decorador</p>
                                <p class="text-3xl font-bold text-purple-800" id="kpi-festas-decorador">0</p>
                                <p class="text-xs text-purple-600 mt-1">via painel</p>
                            </div>
                            <i class="fas fa-user-cog text-3xl text-purple-500"></i>
                        </div>
                    </div>
                    
                    <!-- Receita Recebida -->
                    <div class="bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-xl shadow-sm">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-orange-600">Receita Recebida</p>
                                <p class="text-3xl font-bold text-orange-800" id="kpi-receita-recebida">R$ 0,00</p>
                                <p class="text-xs text-orange-600 mt-1">pagamentos confirmados</p>
                            </div>
                            <i class="fas fa-dollar-sign text-3xl text-orange-500"></i>
                        </div>
                    </div>
                    
                    <!-- Lucro Total do Mês -->
                    <div class="bg-gradient-to-br from-emerald-50 to-emerald-100 p-6 rounded-xl shadow-sm">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-emerald-600">Lucro Total do Mês</p>
                                <p class="text-3xl font-bold text-emerald-800" id="kpi-lucro-total-mes">R$ 0,00</p>
                                <p class="text-xs text-emerald-600 mt-1">projetos com custos</p>
                            </div>
                            <i class="fas fa-chart-line text-3xl text-emerald-500"></i>
                        </div>
                    </div>
                    
                    <!-- Margem Média de Lucro -->
                    <div class="bg-gradient-to-br from-teal-50 to-teal-100 p-6 rounded-xl shadow-sm">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-teal-600">Margem Média de Lucro</p>
                                <p class="text-3xl font-bold text-teal-800" id="kpi-margem-media-lucro">0%</p>
                                <p class="text-xs text-teal-600 mt-1">média dos projetos</p>
                            </div>
                            <i class="fas fa-percentage text-3xl text-teal-500"></i>
                        </div>
                    </div>
                </div>

                <!-- Gráficos -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Gráfico de Festas por Mês -->
                    <div class="bg-white rounded-xl shadow-sm p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">Festas por Mês</h3>
                            <span class="text-sm text-gray-500">Últimos 12 meses</span>
                        </div>
                        <div class="h-64">
                            <canvas id="chart-festas-mes"></canvas>
                        </div>
                    </div>
                    
                    <!-- Gráfico de Festas por Ano -->
                    <div class="bg-white rounded-xl shadow-sm p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">Festas por Ano</h3>
                            <span class="text-sm text-gray-500">Últimos 5 anos</span>
                        </div>
                        <div class="h-64">
                            <canvas id="chart-festas-ano"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Seção de Projetos Concluídos para Lançamento de Custos -->
                <div class="bg-white rounded-xl shadow-sm p-6 mb-8">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">Projetos Concluídos para Lançar Custos</h3>
                            <p class="text-sm text-gray-600 mt-1">Orçamentos aprovados que ainda não tiveram custos reais lançados</p>
                        </div>
                        <button id="refresh-projetos-concluidos" class="px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200">
                            <i class="fas fa-sync-alt mr-2"></i>Atualizar
                        </button>
                    </div>
                    
                    <!-- Lista de Projetos -->
                    <div id="projetos-concluidos-container">
                        <div id="projetos-concluidos-loading" class="hidden text-center py-8">
                            <div class="w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"></div>
                            <p class="text-gray-600">Carregando projetos...</p>
                        </div>
                        
                        <div id="projetos-concluidos-empty" class="hidden text-center py-12">
                            <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-check-circle text-2xl text-gray-400"></i>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-2">Nenhum projeto pendente</h3>
                            <p class="text-gray-600">Todos os projetos aprovados já tiveram seus custos lançados.</p>
                        </div>
                        
                        <div id="projetos-concluidos-list" class="space-y-4">
                            <!-- Os projetos serão carregados dinamicamente aqui -->
                        </div>
                    </div>
                </div>

                <!-- Estado de Carregamento -->
                <div id="dashboard-loading" class="hidden text-center py-12">
                    <div class="w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"></div>
                    <p class="text-gray-600">Carregando dados do dashboard...</p>
                </div>

                <!-- Estado de Erro -->
                <div id="dashboard-error" class="hidden text-center py-12">
                    <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-exclamation-triangle text-2xl text-red-600"></i>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-800 mb-2">Erro ao carregar dados</h3>
                    <p class="text-gray-600 mb-4" id="dashboard-error-message">Ocorreu um erro ao carregar os dados do dashboard.</p>
                    <button id="retry-dashboard" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200">
                        <i class="fas fa-redo mr-2"></i>Tentar Novamente
                    </button>
                </div>
            </div>

            <!-- Módulo Painel Gerencial -->
            <div id="painel-gerencial-module" class="module-content hidden">
                <div class="bg-white rounded-xl shadow-sm">
                    <!-- Header do Painel Gerencial -->
                    <div class="px-6 py-4 border-b border-gray-200">
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                            <div>
                                <h2 class="text-xl font-semibold text-gray-800">Painel Gerencial</h2>
                                <p class="text-sm text-gray-600 mt-1">Visualize e gerencie todos os orçamentos e serviços</p>
                            </div>
                            
                            <!-- Botões de Visualização -->
                            <div class="flex space-x-2 mt-4 sm:mt-0">
                                <button id="view-list-btn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center space-x-2">
                                    <i class="fas fa-list"></i>
                                    <span>Lista</span>
                                </button>
                                <button id="view-calendar-btn" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors duration-200 flex items-center space-x-2">
                                    <i class="fas fa-calendar"></i>
                                    <span>Calendário</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Filtros -->
                    <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                        <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Status do Orçamento</label>
                                <select id="status-filter" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Todos os status</option>
                                    <option value="pendente">Pendentes</option>
                                    <option value="aprovado">Aprovados</option>
                                    <option value="recusado">Recusados</option>
                                    <option value="cancelado">Cancelados</option>
                                    <option value="enviado">Enviados</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Data Inicial</label>
                                <input type="date" id="date-from" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Data Final</label>
                                <input type="date" id="date-to" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Buscar Cliente</label>
                                <input type="text" id="client-filter" placeholder="Nome do cliente" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            
                            <div class="flex items-end space-x-2">
                                <button id="apply-filters" class="flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200">
                                    <i class="fas fa-search mr-2"></i>Filtrar
                                </button>
                                <button id="clear-filters" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors duration-200">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Conteúdo - Visualização em Lista -->
                    <div id="list-view" class="p-6">
                        <!-- Indicador de Filtros Ativos -->
                        <div id="active-filters-indicator" class="mb-4 hidden">
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-filter text-blue-500"></i>
                                        <span class="text-sm font-medium text-blue-800">Filtros ativos:</span>
                                        <span id="active-filters-text" class="text-sm text-blue-700"></span>
                                    </div>
                                    <button id="clear-filters-quick" class="text-blue-600 hover:text-blue-800 text-sm">
                                        <i class="fas fa-times mr-1"></i>Limpar
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Lista Unificada de Orçamentos -->
                        <div class="mb-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-list text-blue-500 mr-2"></i>
                                    Todos os Orçamentos
                                    <span id="total-count" class="ml-2 bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full">0</span>
                                </div>
                                <button id="sort-budgets-btn" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200" title="Alterar ordenação dos orçamentos">
                                    <i class="fas fa-sort-amount-down mr-2" id="sort-icon"></i>
                                    <span id="sort-text">Mais Recentes</span>
                                </button>
                            </h3>
                            <div id="all-budgets" class="space-y-4">
                                <!-- Orçamentos serão carregados dinamicamente aqui -->
                            </div>
                        </div>
                    </div>

                    <!-- Conteúdo - Visualização em Calendário -->
                    <div id="calendar-view" class="p-6 hidden">
                        <div class="bg-white rounded-lg border border-gray-200">
                            <div id="calendar" class="p-4"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Módulo Personalizar Tela Inicial -->
            <div id="personalizar-tela-module" class="module-content hidden">
                <div class="bg-white rounded-xl shadow-sm flex flex-col" style="height: calc(100vh - 200px); min-height: 600px;">
                    <!-- Header do Módulo -->
                    <div class="px-6 py-4 border-b border-gray-200">
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                            <div>
                                <h2 class="text-xl font-semibold text-gray-800">Personalizar Tela Inicial</h2>
                                <p class="text-sm text-gray-600 mt-1">Clique nos elementos da página ao lado para personalizar. As alterações são salvas automaticamente.</p>
                            </div>
                            <div class="mt-4 sm:mt-0 flex gap-2 flex-wrap">
                                <a id="decorator-view-page-link" href="#" target="_blank"
                                   class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 inline-flex items-center">
                                    <i class="fas fa-external-link-alt mr-2"></i>Visualizar Página
                                </a>
                                <button type="button" id="decorator-toggle-edit-mode" 
                                        class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200">
                                    <i class="fas fa-edit mr-2"></i>Modo Edição
                                </button>
                                <button type="button" id="decorator-save-customization" 
                                        class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200">
                                    <i class="fas fa-save mr-2"></i>Salvar
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Layout Dividido: Controles e Preview -->
                    <div class="flex-1 flex flex-col lg:flex-row overflow-hidden">
                        <!-- Painel de Controles (Esquerda) -->
                        <div class="w-full lg:w-1/3 border-r border-gray-200 overflow-y-auto p-6 bg-gray-50">
                            <form id="decorator-page-customization-form" class="space-y-6">
                            <!-- Tabs -->
                            <div class="border-b border-gray-200 mb-6">
                                <nav class="flex space-x-4 overflow-x-auto">
                                    <button type="button" class="decorator-customization-tab active px-4 py-2 text-sm font-medium text-indigo-600 border-b-2 border-indigo-600 whitespace-nowrap" data-tab="content">
                                        <i class="fas fa-edit mr-2"></i>Conteúdo
                                    </button>
                                    <button type="button" class="decorator-customization-tab px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 whitespace-nowrap" data-tab="visual">
                                        <i class="fas fa-paint-brush mr-2"></i>Visual
                                    </button>
                                    <button type="button" class="decorator-customization-tab px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 whitespace-nowrap" data-tab="social">
                                        <i class="fas fa-share-alt mr-2"></i>Redes Sociais
                                    </button>
                                    <button type="button" class="decorator-customization-tab px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 whitespace-nowrap" data-tab="seo">
                                        <i class="fas fa-search mr-2"></i>SEO
                                    </button>
                                </nav>
                            </div>

                            <!-- Tab Content -->
                            <div id="decorator-tab-content" class="space-y-6">
                                <!-- Conteúdo -->
                                <div id="decorator-tab-content-panel" class="decorator-tab-panel">
                                    <div class="space-y-4">
                                        <div class="space-y-2">
                                            <label for="decorator-page-title" class="block text-sm font-medium text-gray-700">
                                                <i class="fas fa-heading mr-2 text-indigo-600"></i>Título da Página *
                                            </label>
                                            <input type="text" id="decorator-page-title" name="page_title" required
                                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                   placeholder="Ex: Bem-vindo à [Seu Nome]">
                                        </div>

                                        <div class="space-y-2">
                                            <label for="decorator-page-description" class="block text-sm font-medium text-gray-700">
                                                <i class="fas fa-align-left mr-2 text-indigo-600"></i>Descrição da Página *
                                            </label>
                                            <textarea id="decorator-page-description" name="page_description" rows="4" required
                                                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none"
                                                      placeholder="Descrição que aparecerá na página pública"></textarea>
                                        </div>

                                        <div class="space-y-2">
                                            <label for="decorator-welcome-text" class="block text-sm font-medium text-gray-700">
                                                <i class="fas fa-comment-dots mr-2 text-indigo-600"></i>Texto de Boas-vindas
                                            </label>
                                            <textarea id="decorator-welcome-text" name="welcome_text" rows="3"
                                                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none"
                                                      placeholder="Mensagem de boas-vindas personalizada"></textarea>
                                        </div>
                                    </div>
                                </div>

                                <!-- Visual -->
                                <div id="decorator-tab-visual-panel" class="decorator-tab-panel hidden">
                                    <div class="space-y-4">
                                        <!-- Informação sobre cores -->
                                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                            <p class="text-sm text-blue-800">
                                                <i class="fas fa-info-circle mr-2"></i>
                                                Selecione as cores que serão usadas na sua página. A imagem de capa e logo são padrão do sistema.
                                            </p>
                                        </div>

                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                            <div class="space-y-2">
                                                <label for="decorator-primary-color" class="block text-sm font-medium text-gray-700">
                                                    <i class="fas fa-palette mr-2 text-blue-600"></i>Cor Primária
                                                </label>
                                                <input type="color" id="decorator-primary-color" name="primary_color" value="#667eea"
                                                       class="w-full h-16 border border-gray-300 rounded-lg cursor-pointer">
                                            </div>

                                            <div class="space-y-2">
                                                <label for="decorator-secondary-color" class="block text-sm font-medium text-gray-700">
                                                    <i class="fas fa-palette mr-2 text-purple-600"></i>Cor Secundária
                                                </label>
                                                <input type="color" id="decorator-secondary-color" name="secondary_color" value="#764ba2"
                                                       class="w-full h-16 border border-gray-300 rounded-lg cursor-pointer">
                                            </div>

                                            <div class="space-y-2">
                                                <label for="decorator-accent-color" class="block text-sm font-medium text-gray-700">
                                                    <i class="fas fa-palette mr-2 text-yellow-600"></i>Cor de Destaque
                                                </label>
                                                <input type="color" id="decorator-accent-color" name="accent_color" value="#f59e0b"
                                                       class="w-full h-16 border border-gray-300 rounded-lg cursor-pointer">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Redes Sociais -->
                                <div id="decorator-tab-social-panel" class="decorator-tab-panel hidden">
                                    <div class="space-y-6">
                                        <!-- Informação -->
                                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                            <p class="text-sm text-blue-800">
                                                <i class="fas fa-info-circle mr-2"></i>
                                                Os campos abaixo serão exibidos na seção de contatos da página inicial do site.
                                            </p>
                                        </div>
                                        
                                        <!-- Campos de Contato para Página Inicial -->
                                        <div class="space-y-4">
                                            <h3 class="text-lg font-semibold text-gray-800 border-b pb-2">
                                                <i class="fas fa-phone-alt mr-2 text-indigo-600"></i>Contatos para Página Inicial
                                            </h3>
                                            
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div class="space-y-2">
                                                    <label for="decorator-contact-email" class="block text-sm font-medium text-gray-700">
                                                        <i class="fas fa-envelope mr-2 text-blue-600"></i>E-mail de Comunicação *
                                                    </label>
                                                    <input type="email" id="decorator-contact-email" name="contact_email"
                                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                           placeholder="contato@exemplo.com">
                                                    <p class="text-xs text-gray-500">Email exibido na página inicial</p>
                                                </div>

                                                <div class="space-y-2">
                                                    <label for="decorator-contact-whatsapp" class="block text-sm font-medium text-gray-700">
                                                        <i class="fab fa-whatsapp mr-2 text-green-600"></i>WhatsApp *
                                                    </label>
                                                    <input type="tel" id="decorator-contact-whatsapp" name="contact_whatsapp"
                                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                                           placeholder="(11) 99999-9999">
                                                    <p class="text-xs text-gray-500">Número para contato via WhatsApp</p>
                                                </div>

                                                <div class="space-y-2 md:col-span-2">
                                                    <label for="decorator-contact-instagram" class="block text-sm font-medium text-gray-700">
                                                        <i class="fab fa-instagram mr-2 text-pink-600"></i>Instagram
                                                    </label>
                                                    <input type="text" id="decorator-contact-instagram" name="contact_instagram"
                                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent"
                                                           placeholder="@usuario ou https://instagram.com/usuario">
                                                    <p class="text-xs text-gray-500">Handle do Instagram (@usuario) ou link completo</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- SEO -->
                                <div id="decorator-tab-seo-panel" class="decorator-tab-panel hidden">
                                    <div class="space-y-4">
                                        <div class="space-y-2">
                                            <label for="decorator-meta-title" class="block text-sm font-medium text-gray-700">
                                                <i class="fas fa-heading mr-2 text-indigo-600"></i>Título SEO
                                            </label>
                                            <input type="text" id="decorator-meta-title" name="meta_title"
                                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                   placeholder="Título para motores de busca (máx. 60 caracteres)">
                                            <p class="text-xs text-gray-500" id="decorator-meta-title-count">0 caracteres</p>
                                        </div>

                                        <div class="space-y-2">
                                            <label for="decorator-meta-description" class="block text-sm font-medium text-gray-700">
                                                <i class="fas fa-align-left mr-2 text-indigo-600"></i>Descrição SEO
                                            </label>
                                            <textarea id="decorator-meta-description" name="meta_description" rows="3"
                                                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none"
                                                      placeholder="Descrição para motores de busca (máx. 160 caracteres)"></textarea>
                                            <p class="text-xs text-gray-500" id="decorator-meta-description-count">0 caracteres</p>
                                        </div>

                                        <div class="space-y-2">
                                            <label for="decorator-meta-keywords" class="block text-sm font-medium text-gray-700">
                                                <i class="fas fa-tags mr-2 text-indigo-600"></i>Palavras-chave
                                            </label>
                                            <input type="text" id="decorator-meta-keywords" name="meta_keywords"
                                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                   placeholder="decorador, festas, balões, eventos (separadas por vírgula)">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            </form>
                        </div>

                        <!-- Preview da Página do Cliente (Direita) -->
                        <div class="w-full lg:w-2/3 relative overflow-hidden bg-gray-100 flex flex-col">
                            <div id="page-preview-container" class="flex-1 overflow-auto bg-white">
                                <iframe id="decorator-page-preview" 
                                        src="" 
                                        class="w-full h-full border-0"
                                        style="min-height: 100%;">
                                </iframe>
                            </div>
                            
                            <!-- Overlay de Edição -->
                            <div id="edit-overlay" class="hidden absolute inset-0 bg-black bg-opacity-20 z-10 pointer-events-none">
                                <div class="absolute top-4 right-4 bg-white rounded-lg shadow-lg p-2">
                                    <p class="text-sm text-gray-700">
                                        <i class="fas fa-info-circle mr-2 text-blue-600"></i>
                                        Modo Edição Ativo - Clique nos elementos para editar
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Módulo Portfólio -->
            <div id="portfolio-module" class="module-content hidden">
                <div class="bg-white rounded-xl shadow-sm">
                    <!-- Header do Portfólio -->
                    <div class="px-6 py-4 border-b border-gray-200">
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                            <div>
                                <h2 class="text-xl font-semibold text-gray-800">Meu Portfólio</h2>
                                <p class="text-sm text-gray-600 mt-1">Gerencie seus trabalhos, fotos e projetos de decoração com balões</p>
                            </div>
                            
                            <!-- Botão Adicionar Serviço -->
                            <button id="add-service-btn" class="mt-4 sm:mt-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-medium hover:from-purple-700 hover:to-pink-700 transition-all duration-200 transform hover:scale-105 flex items-center space-x-2">
                                <i class="fas fa-plus"></i>
                                <span>Adicionar Serviço</span>
                            </button>
                        </div>
                    </div>

                    <!-- Conteúdo do Portfólio -->
                    <div class="p-6">
                        <!-- Grid de Serviços -->
                        <div id="services-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                            <!-- Os cards de serviços serão carregados dinamicamente aqui -->
                        </div>

                        <!-- Estado Vazio -->
                        <div id="empty-portfolio" class="text-center py-12 hidden">
                            <div class="w-24 h-24 bg-gradient-to-br from-purple-100 to-pink-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                <i class="fas fa-briefcase text-4xl text-purple-600"></i>
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800 mb-2">Nenhum serviço adicionado</h3>
                            <p class="text-gray-600 mb-6">Comece adicionando seus primeiros serviços ao portfólio</p>
                            <button id="add-first-service-btn" class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-medium hover:from-purple-700 hover:to-pink-700 transition-all duration-200 transform hover:scale-105">
                                <i class="fas fa-plus mr-2"></i>Adicionar Primeiro Serviço
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Módulo Agenda -->
            <div id="agenda-module" class="module-content hidden">
                <div class="bg-white rounded-xl shadow-sm">
                    <!-- Header do Módulo Agenda -->
                    <div class="px-6 py-4 border-b border-gray-200">
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                            <div>
                                <h2 class="text-xl font-semibold text-gray-800">Gerenciar Agenda</h2>
                                <p class="text-sm text-gray-600 mt-1">Configure sua disponibilidade e gerencie seus compromissos</p>
                            </div>
                        </div>
                    </div>

                    <!-- Conteúdo da Agenda -->
                    <div class="p-6">
                        <!-- Seção de Configuração de Disponibilidade -->
                        <div class="mb-8">
                            <div class="flex items-center mb-6">
                                <div class="w-10 h-10 bg-gradient-to-br from-green-100 to-emerald-100 rounded-lg flex items-center justify-center mr-3">
                                    <i class="fas fa-clock text-green-600"></i>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-800">Configuração de Disponibilidade</h3>
                                    <p class="text-sm text-gray-600">Defina seus horários de atendimento e intervalos entre serviços</p>
                                </div>
                            </div>

                            <!-- Formulário de Disponibilidade -->
                            <form id="availability-form" class="space-y-6">
                                <!-- Dias da Semana -->
                                <div class="bg-gray-50 rounded-lg p-6">
                                    <h4 class="text-md font-semibold text-gray-800 mb-4 flex items-center">
                                        <i class="fas fa-calendar-week mr-2 text-blue-600"></i>
                                        Dias de Disponibilidade
                                    </h4>
                                    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3">
                                        <label class="availability-day-item">
                                            <input type="checkbox" name="available_days" value="monday" class="availability-day-checkbox">
                                            <div class="availability-day-content">
                                                <span class="day-name">Segunda</span>
                                                <span class="day-short">Seg</span>
                                            </div>
                                        </label>
                                        <label class="availability-day-item">
                                            <input type="checkbox" name="available_days" value="tuesday" class="availability-day-checkbox">
                                            <div class="availability-day-content">
                                                <span class="day-name">Terça</span>
                                                <span class="day-short">Ter</span>
                                            </div>
                                        </label>
                                        <label class="availability-day-item">
                                            <input type="checkbox" name="available_days" value="wednesday" class="availability-day-checkbox">
                                            <div class="availability-day-content">
                                                <span class="day-name">Quarta</span>
                                                <span class="day-short">Qua</span>
                                            </div>
                                        </label>
                                        <label class="availability-day-item">
                                            <input type="checkbox" name="available_days" value="thursday" class="availability-day-checkbox">
                                            <div class="availability-day-content">
                                                <span class="day-name">Quinta</span>
                                                <span class="day-short">Qui</span>
                                            </div>
                                        </label>
                                        <label class="availability-day-item">
                                            <input type="checkbox" name="available_days" value="friday" class="availability-day-checkbox">
                                            <div class="availability-day-content">
                                                <span class="day-name">Sexta</span>
                                                <span class="day-short">Sex</span>
                                            </div>
                                        </label>
                                        <label class="availability-day-item">
                                            <input type="checkbox" name="available_days" value="saturday" class="availability-day-checkbox">
                                            <div class="availability-day-content">
                                                <span class="day-name">Sábado</span>
                                                <span class="day-short">Sáb</span>
                                            </div>
                                        </label>
                                        <label class="availability-day-item">
                                            <input type="checkbox" name="available_days" value="sunday" class="availability-day-checkbox">
                                            <div class="availability-day-content">
                                                <span class="day-name">Domingo</span>
                                                <span class="day-short">Dom</span>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <!-- Horários de Atendimento -->
                                <div class="bg-gray-50 rounded-lg p-6">
                                    <h4 class="text-md font-semibold text-gray-800 mb-4 flex items-center">
                                        <i class="fas fa-clock mr-2 text-green-600"></i>
                                        Horários de Atendimento
                                    </h4>
                                    <div id="time-schedules-container">
                                        <!-- Os horários serão carregados dinamicamente aqui -->
                                    </div>
                                    <button type="button" id="add-time-schedule" class="mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center">
                                        <i class="fas fa-plus mr-2"></i>Adicionar Horário
                                    </button>
                                </div>

                                <!-- Intervalos Entre Serviços por Dia -->
                                <div class="bg-gray-50 rounded-lg p-6">
                                    <h4 class="text-md font-semibold text-gray-800 mb-4 flex items-center">
                                        <i class="fas fa-stopwatch mr-2 text-orange-600"></i>
                                        Intervalos Entre Serviços por Dia
                                    </h4>
                                    <div id="service-intervals-container">
                                        <!-- Os intervalos por dia serão carregados dinamicamente aqui -->
                                    </div>
                                    <button type="button" id="add-interval-btn" class="mt-4 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors duration-200 flex items-center">
                                        <i class="fas fa-plus mr-2"></i>Adicionar Intervalo
                                    </button>
                                    <div class="mt-4">
                                        <label for="max-daily-services" class="block text-sm font-medium text-gray-700 mb-2">
                                            Máximo de serviços por dia
                                        </label>
                                        <input type="number" id="max-daily-services" name="max_daily_services" min="1" max="10" value="3" 
                                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                        <p class="text-xs text-gray-500 mt-1">Limite de serviços que podem ser agendados no mesmo dia</p>
                                    </div>
                                </div>

                                <!-- Botões de Ação -->
                                <div class="flex flex-col sm:flex-row gap-3 pt-4">
                                    <button type="button" id="reset-availability" 
                                            class="flex-1 px-6 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-all duration-200">
                                        <i class="fas fa-undo mr-2"></i>Resetar
                                    </button>
                                    <button type="submit" id="save-availability"
                                            class="flex-1 px-6 py-3 text-white bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 rounded-lg font-medium transition-all duration-200 transform hover:scale-105">
                                        <i class="fas fa-save mr-2"></i>Salvar Configurações
                                    </button>
                                </div>
                            </form>
                        </div>

                        <!-- Seção de Datas Bloqueadas -->
                        <div class="border-t border-gray-200 pt-8">
                            <div class="flex items-center mb-6">
                                <div class="w-10 h-10 bg-gradient-to-br from-red-100 to-pink-100 rounded-lg flex items-center justify-center mr-3">
                                    <i class="fas fa-ban text-red-600"></i>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-800">Datas Bloqueadas</h3>
                                    <p class="text-sm text-gray-600">Bloqueie datas específicas em que não pode atender</p>
                                </div>
                            </div>

                            <!-- Formulário de Adicionar Data Bloqueada -->
                            <div class="bg-gray-50 rounded-lg p-6 mb-6">
                                <h4 class="text-md font-semibold text-gray-800 mb-4 flex items-center">
                                    <i class="fas fa-plus-circle mr-2 text-red-600"></i>
                                    Adicionar Data Bloqueada
                                </h4>
                                <form id="blocked-date-form" class="space-y-4">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label for="blocked-date" class="block text-sm font-medium text-gray-700 mb-1">
                                                Data a Bloquear
                                            </label>
                                            <input type="date" id="blocked-date" name="blocked_date" required 
                                                   min="<?php echo date('Y-m-d'); ?>" 
                                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent">
                                        </div>
                                        <div>
                                            <label for="blocked-date-reason" class="block text-sm font-medium text-gray-700 mb-1">
                                                Motivo (opcional)
                                            </label>
                                            <input type="text" id="blocked-date-reason" name="reason" 
                                                   placeholder="Ex: Feriado, Viagem, etc."
                                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent">
                                        </div>
                                    </div>
                                    <div class="flex items-center">
                                        <input type="checkbox" id="is-recurring" name="is_recurring" 
                                               class="h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded">
                                        <label for="is-recurring" class="ml-2 block text-sm text-gray-700">
                                            Repetir anualmente (feriados, aniversários, etc.)
                                        </label>
                                    </div>
                                    <button type="submit" id="add-blocked-date-btn"
                                            class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200 flex items-center">
                                        <i class="fas fa-ban mr-2"></i>Bloquear Data
                                    </button>
                                </form>
                            </div>

                            <!-- Lista de Datas Bloqueadas -->
                            <div class="bg-gray-50 rounded-lg p-6">
                                <h4 class="text-md font-semibold text-gray-800 mb-4 flex items-center">
                                    <i class="fas fa-list mr-2 text-red-600"></i>
                                    Datas Bloqueadas
                                </h4>
                                <div id="blocked-dates-list" class="space-y-3">
                                    <!-- Lista de datas bloqueadas será carregada dinamicamente aqui -->
                                </div>
                                <div id="no-blocked-dates" class="text-center py-8 text-gray-500 hidden">
                                    <i class="fas fa-calendar-times text-4xl mb-4"></i>
                                    <p>Nenhuma data bloqueada</p>
                                    <p class="text-sm">Adicione datas que você não pode atender</p>
                                </div>
                            </div>
                        </div>

                        <!-- Seção de Visualização da Agenda -->
                        <div class="border-t border-gray-200 pt-8">
                            <div class="flex items-center mb-6">
                                <div class="w-10 h-10 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-lg flex items-center justify-center mr-3">
                                    <i class="fas fa-calendar-alt text-blue-600"></i>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-800">Visualização da Agenda</h3>
                                    <p class="text-sm text-gray-600">Veja seus compromissos e disponibilidade</p>
                                </div>
                            </div>
                            
                            <!-- Calendário de Agenda -->
                            <div class="bg-white rounded-lg border border-gray-200">
                                <div id="agenda-calendar" class="p-4"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Módulo Conta -->
            <div id="account-module" class="module-content hidden">
                <div class="grid grid-cols-1 xl:grid-cols-3 gap-4 md:gap-6 items-start">
                    <!-- Card de Foto de Perfil -->
                    <div class="bg-white rounded-xl shadow-sm p-4 md:p-6 xl:col-span-1">
                        <div class="flex flex-col items-center text-center">
                            <div class="relative">
                                <img id="account-profile-photo" src="../Images/Logo System.jpeg" alt="Foto do Perfil" class="w-32 h-32 rounded-full object-cover border-4 border-blue-200 shadow-md">
                                <button id="remove-account-photo" class="absolute bottom-0 right-0 bg-red-500 text-white w-8 h-8 rounded-full flex items-center justify-center shadow transition-all hover:bg-red-600" title="Remover foto">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="mt-4 space-y-1">
                                <h3 id="account-profile-name" class="text-lg font-semibold text-gray-800">Decorador</h3>
                                <p id="account-profile-email" class="text-sm text-gray-500">decorador@upbaloes.com</p>
                            </div>
                            <div class="mt-5 w-full">
                                <label for="account-profile-photo-input" class="block text-sm font-medium text-gray-700 mb-2">Atualizar foto de perfil</label>
                                <input type="file" id="account-profile-photo-input" accept="image/*" class="w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-600 hover:file:bg-blue-100">
                                <p class="mt-2 text-xs text-gray-400">Formatos aceitos: JPG, PNG, GIF, WebP (até 5MB)</p>
                            </div>
                            <div id="account-photo-feedback" class="mt-4 text-xs text-gray-500 hidden"></div>
                        </div>
                    </div>
                    
                    <!-- Formulário de Informações -->
                    <div class="xl:col-span-2 space-y-4 md:space-y-6">
                        <div class="bg-white rounded-xl shadow-sm p-4 md:p-6">
                            <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-4 md:mb-6">
                                <div>
                                    <h3 class="text-lg md:text-2xl font-bold text-gray-800">Informações da Conta</h3>
                                    <p class="text-sm md:text-base text-gray-600">Atualize seus dados pessoais</p>
                                </div>
                                <div id="account-profile-updated" class="hidden text-xs text-green-600 bg-green-50 px-3 py-1 rounded-full font-medium">
                                    <i class="fas fa-check-circle mr-1"></i>Dados salvos
                                </div>
                            </div>
                            
                            <form id="account-form-inline" class="space-y-4 md:space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                                    <!-- Nome -->
                                    <div class="space-y-2">
                                        <label for="account-name-inline" class="block text-sm font-medium text-gray-700">
                                            <i class="fas fa-user mr-2 text-blue-600"></i>Nome completo *
                                        </label>
                                        <input type="text" id="account-name-inline" name="name" required
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                               placeholder="Digite seu nome completo">
                                    </div>
                                    
                                    <!-- Email -->
                                    <div class="space-y-2">
                                        <label for="account-email-inline" class="block text-sm font-medium text-gray-700">
                                            <i class="fas fa-envelope mr-2 text-blue-600"></i>Email de acesso *
                                        </label>
                                        <input type="email" id="account-email-inline" name="email" required
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                               placeholder="decorador@empresa.com">
                                    </div>
                                    
                                    <!-- Telefone -->
                                    <div class="space-y-2">
                                        <label for="account-phone-inline" class="block text-sm font-medium text-gray-700">
                                            <i class="fas fa-phone mr-2 text-blue-600"></i>Telefone
                                        </label>
                                        <input type="tel" id="account-phone-inline" name="phone"
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                               placeholder="(11) 99999-9999">
                                    </div>
                                    
                                    <!-- WhatsApp -->
                                    <div class="space-y-2">
                                        <label for="account-whatsapp" class="block text-sm font-medium text-gray-700">
                                            <i class="fab fa-whatsapp mr-2 text-green-600"></i>WhatsApp
                                        </label>
                                        <input type="tel" id="account-whatsapp" name="whatsapp"
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"
                                               placeholder="(11) 99999-9999">
                                        <p class="text-xs text-gray-500">Número exibido aos clientes para contato rápido</p>
                                    </div>
                                    
                                    <!-- Instagram -->
                                    <div class="space-y-2">
                                        <label for="account-instagram" class="block text-sm font-medium text-gray-700">
                                            <i class="fab fa-instagram mr-2 text-pink-500"></i>Instagram
                                        </label>
                                        <input type="text" id="account-instagram" name="instagram"
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-200"
                                               placeholder="@seuinstagram">
                                    </div>
                                    
                                    <!-- Email de comunicação -->
                                    <div class="space-y-2">
                                        <label for="account-communication-email" class="block text-sm font-medium text-gray-700">
                                            <i class="fas fa-envelope-open-text mr-2 text-purple-600"></i>Email de comunicação
                                        </label>
                                        <input type="email" id="account-communication-email" name="communication_email"
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200"
                                               placeholder="contato@empresa.com">
                                        <p class="text-xs text-gray-500">Endereço usado em notificações enviadas aos clientes</p>
                                    </div>
                                </div>
                                
                                <!-- Descrição / Bio -->
                                <div class="space-y-2">
                                    <label for="account-bio" class="block text-sm font-medium text-gray-700">
                                        <i class="fas fa-comment-dots mr-2 text-blue-600"></i>Descrição / Bio
                                    </label>
                                    <textarea id="account-bio" name="bio" rows="4"
                                              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"
                                              placeholder="Escreva uma breve descrição sobre você e seus serviços."></textarea>
                                    <p class="text-xs text-gray-500 text-right"><span id="account-bio-count">0</span>/500 caracteres</p>
                                </div>
                                
                                <!-- Endereço -->
                                <div class="space-y-2">
                                    <label for="account-address-inline" class="block text-sm font-medium text-gray-700">
                                        <i class="fas fa-map-marker-alt mr-2 text-blue-600"></i>Endereço
                                    </label>
                                    <textarea id="account-address-inline" name="address" rows="3"
                                              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"
                                              placeholder="Digite seu endereço completo"></textarea>
                                </div>
                                
                                <!-- Cidade, Estado e CEP -->
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6">
                                    <div class="space-y-2">
                                        <label for="account-city-inline" class="block text-sm font-medium text-gray-700">
                                            <i class="fas fa-city mr-2 text-blue-600"></i>Cidade
                                        </label>
                                        <input type="text" id="account-city-inline" name="city"
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                               placeholder="Sua cidade">
                                    </div>
                                    <div class="space-y-2">
                                        <label for="account-state-inline" class="block text-sm font-medium text-gray-700">
                                            <i class="fas fa-map mr-2 text-blue-600"></i>Estado
                                        </label>
                                        <select id="account-state-inline" name="state"
                                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200">
                                            <option value="">Selecione o estado</option>
                                            <option value="AC">Acre</option>
                                            <option value="AL">Alagoas</option>
                                            <option value="AP">Amapá</option>
                                            <option value="AM">Amazonas</option>
                                            <option value="BA">Bahia</option>
                                            <option value="CE">Ceará</option>
                                            <option value="DF">Distrito Federal</option>
                                            <option value="ES">Espírito Santo</option>
                                            <option value="GO">Goiás</option>
                                            <option value="MA">Maranhão</option>
                                            <option value="MT">Mato Grosso</option>
                                            <option value="MS">Mato Grosso do Sul</option>
                                            <option value="MG">Minas Gerais</option>
                                            <option value="PA">Pará</option>
                                            <option value="PB">Paraíba</option>
                                            <option value="PR">Paraná</option>
                                            <option value="PE">Pernambuco</option>
                                            <option value="PI">Piauí</option>
                                            <option value="RJ">Rio de Janeiro</option>
                                            <option value="RN">Rio Grande do Norte</option>
                                            <option value="RS">Rio Grande do Sul</option>
                                            <option value="RO">Rondônia</option>
                                            <option value="RR">Roraima</option>
                                            <option value="SC">Santa Catarina</option>
                                            <option value="SP">São Paulo</option>
                                            <option value="SE">Sergipe</option>
                                            <option value="TO">Tocantins</option>
                                        </select>
                                    </div>
                                    <div class="space-y-2">
                                        <label for="account-zipcode-inline" class="block text-sm font-medium text-gray-700">
                                            <i class="fas fa-mail-bulk mr-2 text-blue-600"></i>CEP
                                        </label>
                                        <input type="text" id="account-zipcode-inline" name="zipcode"
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                               placeholder="00000-000" maxlength="9">
                                    </div>
                                </div>
                                
                                <!-- Botões -->
                                <div class="flex flex-col sm:flex-row gap-3 pt-2 md:pt-4">
                                    <button type="reset" id="reset-account-profile"
                                            class="flex-1 px-4 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-all duration-200">
                                        <i class="fas fa-undo mr-2"></i>Descartar alterações
                                    </button>
                                    <button type="submit" id="save-account-profile"
                                            class="flex-1 px-4 py-3 text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-lg font-medium transition-all duration-200 transform hover:scale-105">
                                        <i class="fas fa-save mr-2"></i>Salvar alterações
                                    </button>
                                </div>
                            </form>
                        </div>
                        
                        <!-- Seção de Segurança -->
                        <div class="bg-white rounded-xl shadow-sm p-4 md:p-6">
                            <div class="mb-4 md:mb-6">
                                <h3 class="text-lg md:text-2xl font-bold text-gray-800">Segurança</h3>
                                <p class="text-sm md:text-base text-gray-600">Atualize sua senha de acesso ao painel</p>
                            </div>
                            
                            <form id="account-password-form-inline" class="space-y-4 md:space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6">
                                    <div class="space-y-2">
                                        <label for="account-current-password-inline" class="block text-sm font-medium text-gray-700">
                                            <i class="fas fa-lock mr-2 text-blue-600"></i>Senha atual *
                                        </label>
                                        <div class="relative">
                                            <input type="password" id="account-current-password-inline" name="current_password" required
                                                   class="w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                                   placeholder="********">
                                            <button type="button" class="password-toggle absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600" data-target="account-current-password-inline">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="space-y-2">
                                        <label for="account-new-password-inline" class="block text-sm font-medium text-gray-700">
                                            <i class="fas fa-key mr-2 text-blue-600"></i>Nova senha *
                                        </label>
                                        <div class="relative">
                                            <input type="password" id="account-new-password-inline" name="new_password" required minlength="8"
                                                   class="w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                                   placeholder="********">
                                            <button type="button" class="password-toggle absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600" data-target="account-new-password-inline">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <p class="text-xs text-gray-500">Mínimo 8 caracteres com letras e números</p>
                                    </div>
                                    
                                    <div class="space-y-2">
                                        <label for="account-confirm-password-inline" class="block text-sm font-medium text-gray-700">
                                            <i class="fas fa-check-circle mr-2 text-blue-600"></i>Confirmar senha *
                                        </label>
                                        <div class="relative">
                                            <input type="password" id="account-confirm-password-inline" name="confirm_password" required minlength="8"
                                                   class="w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                                   placeholder="********">
                                            <button type="button" class="password-toggle absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600" data-target="account-confirm-password-inline">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="flex flex-col sm:flex-row gap-3 pt-2 md:pt-4">
                                    <button type="reset" id="reset-account-password"
                                            class="flex-1 px-4 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-all duration-200">
                                        <i class="fas fa-undo mr-2"></i>Limpar campos
                                    </button>
                                    <button type="submit" id="save-account-password"
                                            class="flex-1 px-4 py-3 text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-lg font-medium transition-all duration-200 transform hover:scale-105">
                                        <i class="fas fa-key mr-2"></i>Atualizar senha
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- Botão Flutuante de + (Contextual) - Oculto no módulo de agenda -->
    <button id="floating-add-btn" class="fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-full shadow-lg hover:shadow-xl transform hover:scale-110 transition-all duration-200 z-40 flex items-center justify-center">
        <i class="fas fa-plus text-xl"></i>
    </button>

    <!-- Container de Notificações Toast -->
    <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <!-- Modal de Criação de Orçamento -->
    <div id="create-budget-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <!-- Overlay -->
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" id="create-budget-modal-overlay"></div>

            <!-- Modal Content -->
            <div class="inline-block w-full max-w-4xl p-0 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl">
                <!-- Header -->
                <div class="bg-gradient-to-r from-blue-600 to-indigo-700 px-6 py-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                <i class="fas fa-plus text-white text-lg"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-white">Criar Novo Orçamento</h3>
                                <p class="text-blue-100 text-sm">Preencha os dados do orçamento</p>
                            </div>
                        </div>
                        <button id="close-create-budget-modal" class="text-white hover:text-gray-200 transition-colors duration-200">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                </div>

                <!-- Form -->
                <form id="create-budget-form" class="p-6 space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Cliente -->
                        <div class="space-y-2">
                            <label for="budget-client" class="block text-sm font-medium text-gray-700">
                                <i class="fas fa-user mr-2 text-blue-600"></i>Cliente
                            </label>
                            <input type="text" id="budget-client" name="client" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                   placeholder="Nome do cliente">
                        </div>

                        <!-- Email do Cliente -->
                        <div class="space-y-2">
                            <label for="budget-email" class="block text-sm font-medium text-gray-700">
                                <i class="fas fa-envelope mr-2 text-blue-600"></i>Email
                            </label>
                            <input type="email" id="budget-email" name="email" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                   placeholder="email@cliente.com">
                        </div>

                        <!-- Telefone -->
                        <div class="space-y-2">
                            <label for="budget-phone" class="block text-sm font-medium text-gray-700">
                                <i class="fas fa-phone mr-2 text-blue-600"></i>Telefone
                            </label>
                            <input type="tel" id="budget-phone" name="phone"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                   placeholder="(11) 99999-9999">
                        </div>

                        <!-- Data do Evento -->
                        <div class="space-y-2">
                            <label for="budget-event-date" class="block text-sm font-medium text-gray-700">
                                <i class="fas fa-calendar mr-2 text-blue-600"></i>Data do Evento
                            </label>
                            <input type="date" id="budget-event-date" name="event_date" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200">
                        </div>

                        <!-- Hora do Evento -->
                        <div class="space-y-2">
                            <label for="budget-event-time" class="block text-sm font-medium text-gray-700">
                                <i class="fas fa-clock mr-2 text-blue-600"></i>Hora do Evento
                            </label>
                            <input type="time" id="budget-event-time" name="event_time" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200">
                        </div>

                        <!-- Local do Evento -->
                        <div class="space-y-2">
                            <label for="budget-event-location" class="block text-sm font-medium text-gray-700">
                                <i class="fas fa-map-marker-alt mr-2 text-blue-600"></i>Local do Evento
                            </label>
                            <input type="text" id="budget-event-location" name="event_location" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                   placeholder="Endereço do evento">
                        </div>
                    </div>

                    <!-- Tipo de Serviço -->
                    <div class="space-y-2">
                        <label for="budget-service-type" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-gift mr-2 text-blue-600"></i>Tipo de Serviço
                        </label>
                        <select id="budget-service-type" name="service_type" required
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200">
                            <option value="">Selecione o tipo de serviço</option>
                            <option value="arco-tradicional">Arco-Tradicional</option>
                            <option value="arco-desconstruido">Arco-Desconstruído</option>
                            <option value="escultura-balao">Escultura de Balão</option>
                            <option value="centro-mesa">Centro de Mesa</option>
                            <option value="baloes-piscina">Balões na Piscina</option>
                        </select>
                    </div>

                    <!-- Tamanho do Arco -->
                    <div id="budget-arc-size-container" class="space-y-2">
                        <label for="budget-arc-size" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-ruler mr-2 text-blue-600"></i>Tamanho do Arco (metros)
                        </label>
                        <input type="number" id="budget-arc-size" name="tamanho_arco_m" step="0.1" min="0.5" max="30"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                               placeholder="Ex: 2.5">
                        <div class="text-xs text-gray-500">
                            <i class="fas fa-info-circle mr-1"></i>
                            Informe o tamanho do arco em metros (entre 0.5 e 30 metros). Obrigatório apenas para Arco-Tradicional e Arco-Desconstruído.
                        </div>
                    </div>

                    <!-- Descrição do Evento -->
                    <div class="space-y-2">
                        <label for="budget-description" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-align-left mr-2 text-blue-600"></i>Descrição do Evento
                        </label>
                        <textarea id="budget-description" name="description" rows="4"
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"
                                  placeholder="Descreva os detalhes do evento e decoração desejada"></textarea>
                    </div>

                    <!-- Valor Estimado -->
                    <div class="space-y-2">
                        <label for="budget-estimated-value" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-dollar-sign mr-2 text-blue-600"></i>Valor Estimado
                        </label>
                        <input type="number" id="budget-estimated-value" name="estimated_value" step="0.01" min="0"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                               placeholder="0.00">
                    </div>

                    <!-- Observações -->
                    <div class="space-y-2">
                        <label for="budget-notes" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-sticky-note mr-2 text-blue-600"></i>Observações
                        </label>
                        <textarea id="budget-notes" name="notes" rows="3"
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"
                                  placeholder="Observações adicionais"></textarea>
                    </div>

                    <!-- Imagem de Inspiração -->
                    <div class="space-y-2">
                        <label for="budget-inspiration-image" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-image mr-2 text-blue-600"></i>Imagem de Inspiração
                        </label>
                        <div class="relative">
                            <input type="file" id="budget-inspiration-image" name="inspiration_image" accept="image/*"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                            <div class="text-xs text-gray-500 mt-1">
                                <i class="fas fa-info-circle mr-1"></i>
                                Envie uma imagem que inspire a decoração desejada (opcional)
                            </div>
                        </div>
                        <!-- Preview da imagem -->
                        <div id="budget-image-preview" class="hidden mt-3">
                            <img id="budget-preview-img" src="" alt="Preview" class="max-w-xs max-h-48 rounded-lg shadow-md">
                            <button type="button" id="budget-remove-image" class="mt-2 text-red-600 hover:text-red-800 text-sm">
                                <i class="fas fa-trash mr-1"></i>Remover imagem
                            </button>
                        </div>
                    </div>

                    <!-- Botões -->
                    <div class="flex flex-col sm:flex-row gap-3 pt-4">
                        <button type="button" id="cancel-create-budget" 
                                class="flex-1 px-6 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-all duration-200">
                            <i class="fas fa-times mr-2"></i>Cancelar
                        </button>
                        <button type="submit" id="save-create-budget"
                                class="flex-1 px-6 py-3 text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-lg font-medium transition-all duration-200 transform hover:scale-105">
                            <i class="fas fa-save mr-2"></i>Criar Orçamento
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes do Orçamento -->
    <div id="budget-details-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <!-- Overlay -->
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" id="budget-details-modal-overlay"></div>

            <!-- Modal Content -->
            <div class="inline-block w-full max-w-2xl p-0 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl">
                <!-- Header -->
                <div class="bg-gradient-to-r from-green-600 to-emerald-700 px-6 py-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                <i class="fas fa-eye text-white text-lg"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-white">Detalhes do Orçamento</h3>
                                <p class="text-green-100 text-sm">Visualize as informações completas</p>
                            </div>
                        </div>
                        <button id="close-budget-details-modal" class="text-white hover:text-gray-200 transition-colors duration-200">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                </div>

                <!-- Content -->
                <div id="budget-details-content" class="p-6">
                    <!-- Conteúdo será carregado dinamicamente -->
                </div>

                <!-- Footer com botão de impressão -->
                <div class="bg-gray-50 px-6 py-4 border-t border-gray-200">
                    <div class="flex justify-end">
                        <button id="print-budget-btn" class="inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200">
                            <i class="fas fa-print mr-2"></i>
                            Imprimir Orçamento
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Gerenciamento de Conta (reutilizado do sistema principal) -->
    <div id="account-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <!-- Overlay -->
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" id="account-modal-overlay"></div>

            <!-- Modal Content -->
            <div class="inline-block w-full max-w-2xl p-0 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl">
                <!-- Header -->
                <div class="bg-gradient-to-r from-blue-600 to-indigo-700 px-6 py-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                <i class="fas fa-user-cog text-white text-lg"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-white">Gerenciar Conta</h3>
                                <p class="text-blue-100 text-sm">Atualize suas informações pessoais</p>
                            </div>
                        </div>
                        <button id="close-account-modal" class="text-white hover:text-gray-200 transition-colors duration-200">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                </div>

                <!-- Form -->
                <form id="account-form" class="p-6 space-y-6">
                    <!-- Nome -->
                    <div class="space-y-2">
                        <label for="account-name" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-user mr-2 text-blue-600"></i>Nome Completo
                        </label>
                        <input type="text" id="account-name" name="name" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                               placeholder="Digite seu nome completo">
                    </div>

                    <!-- Email -->
                    <div class="space-y-2">
                        <label for="account-email" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-envelope mr-2 text-blue-600"></i>Email
                        </label>
                        <input type="email" id="account-email" name="email" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                               placeholder="Digite seu email">
                    </div>

                    <!-- Telefone -->
                    <div class="space-y-2">
                        <label for="account-phone" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-phone mr-2 text-blue-600"></i>Telefone
                        </label>
                        <input type="tel" id="account-phone" name="phone"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                               placeholder="(11) 99999-9999">
                    </div>

                    <!-- Endereço -->
                    <div class="space-y-2">
                        <label for="account-address" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-map-marker-alt mr-2 text-blue-600"></i>Endereço
                        </label>
                        <textarea id="account-address" name="address" rows="3"
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"
                                  placeholder="Digite seu endereço completo"></textarea>
                    </div>

                    <!-- Cidade e Estado -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="space-y-2">
                            <label for="account-city" class="block text-sm font-medium text-gray-700">
                                <i class="fas fa-city mr-2 text-blue-600"></i>Cidade
                            </label>
                            <input type="text" id="account-city" name="city"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                   placeholder="Sua cidade">
                        </div>
                        <div class="space-y-2">
                            <label for="account-state" class="block text-sm font-medium text-gray-700">
                                <i class="fas fa-map mr-2 text-blue-600"></i>Estado
                            </label>
                            <select id="account-state" name="state"
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200">
                                <option value="">Selecione o estado</option>
                                <option value="AC">Acre</option>
                                <option value="AL">Alagoas</option>
                                <option value="AP">Amapá</option>
                                <option value="AM">Amazonas</option>
                                <option value="BA">Bahia</option>
                                <option value="CE">Ceará</option>
                                <option value="DF">Distrito Federal</option>
                                <option value="ES">Espírito Santo</option>
                                <option value="GO">Goiás</option>
                                <option value="MA">Maranhão</option>
                                <option value="MT">Mato Grosso</option>
                                <option value="MS">Mato Grosso do Sul</option>
                                <option value="MG">Minas Gerais</option>
                                <option value="PA">Pará</option>
                                <option value="PB">Paraíba</option>
                                <option value="PR">Paraná</option>
                                <option value="PE">Pernambuco</option>
                                <option value="PI">Piauí</option>
                                <option value="RJ">Rio de Janeiro</option>
                                <option value="RN">Rio Grande do Norte</option>
                                <option value="RS">Rio Grande do Sul</option>
                                <option value="RO">Rondônia</option>
                                <option value="RR">Roraima</option>
                                <option value="SC">Santa Catarina</option>
                                <option value="SP">São Paulo</option>
                                <option value="SE">Sergipe</option>
                                <option value="TO">Tocantins</option>
                            </select>
                        </div>
                    </div>

                    <!-- CEP -->
                    <div class="space-y-2">
                        <label for="account-zipcode" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-mail-bulk mr-2 text-blue-600"></i>CEP
                        </label>
                        <input type="text" id="account-zipcode" name="zipcode"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                               placeholder="00000-000" maxlength="9">
                    </div>

                    <!-- Senha Atual -->
                    <div class="space-y-2">
                        <label for="account-current-password" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-lock mr-2 text-blue-600"></i>Senha Atual
                        </label>
                        <div class="relative">
                            <input type="password" id="account-current-password" name="current_password"
                                   class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                   placeholder="Digite sua senha atual">
                            <button type="button" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 toggle-password">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Nova Senha -->
                    <div class="space-y-2">
                        <label for="account-new-password" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-key mr-2 text-blue-600"></i>Nova Senha
                        </label>
                        <div class="relative">
                            <input type="password" id="account-new-password" name="new_password"
                                   class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                   placeholder="Digite sua nova senha">
                            <button type="button" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 toggle-password">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="text-xs text-gray-500">
                            <i class="fas fa-info-circle mr-1"></i>
                            Mínimo de 8 caracteres, com letras e números
                        </div>
                    </div>

                    <!-- Confirmar Nova Senha -->
                    <div class="space-y-2">
                        <label for="account-confirm-password" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-check-circle mr-2 text-blue-600"></i>Confirmar Nova Senha
                        </label>
                        <div class="relative">
                            <input type="password" id="account-confirm-password" name="confirm_password"
                                   class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                   placeholder="Confirme sua nova senha">
                            <button type="button" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 toggle-password">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Botões -->
                    <div class="flex flex-col sm:flex-row gap-3 pt-4">
                        <button type="button" id="cancel-account-changes" 
                                class="flex-1 px-6 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-all duration-200">
                            <i class="fas fa-times mr-2"></i>Cancelar
                        </button>
                        <button type="submit" id="save-account-changes"
                                class="flex-1 px-6 py-3 text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-lg font-medium transition-all duration-200 transform hover:scale-105">
                            <i class="fas fa-save mr-2"></i>Salvar Alterações
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de Adicionar/Editar Serviço -->
    <div id="service-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4 py-4">
            <!-- Overlay -->
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" id="service-modal-overlay"></div>

            <!-- Modal Content -->
            <div class="relative w-full max-w-2xl p-0 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl">
                <!-- Header -->
                <div class="bg-gradient-to-r from-purple-600 to-pink-700 px-6 py-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                <i class="fas fa-briefcase text-white text-lg"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-white" id="service-modal-title">Adicionar Serviço</h3>
                                <p class="text-purple-100 text-sm" id="service-modal-subtitle">Preencha as informações do seu serviço</p>
                            </div>
                        </div>
                        <button id="close-service-modal" class="text-white hover:text-gray-200 transition-colors duration-200">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                </div>

                <!-- Form -->
                <form id="service-form" class="p-6 space-y-6">
                    <!-- Imagem do Serviço -->
                    <div class="space-y-2">
                        <label for="service-image" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-image mr-2 text-purple-600"></i>Imagem do Serviço
                        </label>
                        <div class="flex items-center space-x-4">
                            <div class="flex-1">
                                <input type="file" id="service-image" name="image" accept="image/*" 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200">
                            </div>
                            <div id="image-preview" class="w-24 h-24 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center hidden relative">
                                <img id="preview-img" src="" alt="Preview" class="w-full h-full object-cover rounded-lg">
                                <button type="button" id="edit-image-btn" class="absolute top-1 right-1 w-6 h-6 bg-indigo-600 text-white rounded-full flex items-center justify-center hover:bg-indigo-700 transition-colors duration-200 text-xs opacity-0 hover:opacity-100">
                                    <i class="fas fa-edit"></i>
                                </button>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="text-xs text-gray-500">
                                <i class="fas fa-info-circle mr-1"></i>
                                Formatos aceitos: JPG, PNG, GIF (máx. 5MB)
                            </div>
                            <button type="button" id="open-image-editor" class="text-xs text-indigo-600 hover:text-indigo-800 font-medium hidden">
                                <i class="fas fa-crop mr-1"></i>Editar Imagem
                            </button>
                        </div>
                    </div>

                    <!-- Tipo de Serviço -->
                    <div class="space-y-2">
                        <label for="service-type" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-tag mr-2 text-purple-600"></i>Tipo de Serviço
                        </label>
                        <select id="service-type" name="type" required
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200">
                            <option value="">Selecione o tipo de serviço</option>
                            <option value="Arco-Tradicional">Arco Tradicional</option>
                            <option value="Arco-Desconstruído">Arco Desconstruído</option>
                            <option value="Escultura-de-Balao">Escultura de Balão</option>
                            <option value="Centro-de-Mesa">Centro de Mesa</option>
                            <option value="Balões-na-Piscina">Balões na Piscina</option>
                        </select>
                    </div>

                    <!-- Título do Serviço -->
                    <div class="space-y-2">
                        <label for="service-title" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-heading mr-2 text-purple-600"></i>Título do Serviço
                        </label>
                        <input type="text" id="service-title" name="title" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200"
                               placeholder="Ex: Arco de Balões para Aniversário">
                    </div>

                    <!-- Descrição -->
                    <div class="space-y-2">
                        <label for="service-description" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-align-left mr-2 text-purple-600"></i>Descrição
                        </label>
                        <textarea id="service-description" name="description" rows="4"
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 resize-none"
                                  placeholder="Descreva os detalhes do seu serviço..."></textarea>
                    </div>

                    <!-- Preço (opcional) -->
                    <div class="space-y-2">
                        <label for="service-price" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-dollar-sign mr-2 text-purple-600"></i>Preço (opcional)
                        </label>
                        <input type="number" id="service-price" name="price" step="0.01" min="0"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200"
                               placeholder="0.00">
                    </div>

                    <!-- Tamanho do Arco -->
                    <div class="space-y-2">
                        <label for="service-arc-size" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-ruler mr-2 text-purple-600"></i>Tamanho do Arco
                        </label>
                        <input type="text" id="service-arc-size" name="arcSize"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200"
                               placeholder="Ex: 2.5m de altura, 3m de largura, etc.">
                    </div>

                    <!-- Botões -->
                    <div class="flex flex-col sm:flex-row gap-3 pt-4">
                        <button type="button" id="cancel-service" 
                                class="flex-1 px-6 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-all duration-200">
                            <i class="fas fa-times mr-2"></i>Cancelar
                        </button>
                        <button type="submit" id="save-service"
                                class="flex-1 px-6 py-3 text-white bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 rounded-lg font-medium transition-all duration-200 transform hover:scale-105">
                            <i class="fas fa-save mr-2"></i>Salvar Serviço
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de Envio de Orçamento -->
    <div id="send-budget-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <!-- Overlay -->
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" id="send-budget-modal-overlay"></div>

            <!-- Modal Content -->
            <div class="inline-block w-full max-w-2xl p-0 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl">
                <!-- Header -->
                <div class="bg-gradient-to-r from-green-600 to-emerald-700 px-6 py-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                <i class="fas fa-paper-plane text-white text-lg"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-white">Enviar Orçamento</h3>
                                <p class="text-green-100 text-sm">Escolha como deseja enviar o orçamento para o cliente</p>
                            </div>
                        </div>
                        <button id="close-send-budget-modal" class="text-white hover:text-gray-200 transition-colors duration-200">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                </div>

                <!-- Content -->
                <div class="p-6">
                    <!-- Informações do Orçamento -->
                    <div class="bg-gray-50 rounded-lg p-4 mb-6">
                        <h4 class="text-lg font-semibold text-gray-800 mb-3">Orçamento Selecionado</h4>
                        <div id="send-budget-info" class="space-y-2">
                            <!-- Informações serão carregadas dinamicamente -->
                        </div>
                    </div>

                    <!-- Opções de Envio -->
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">Escolha o método de envio:</h4>
                        
                        <!-- E-mail -->
                        <div class="border border-gray-200 rounded-lg p-4 hover:border-green-300 hover:bg-green-50 transition-all duration-200 cursor-pointer" onclick="selectSendMethod('email')">
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-envelope text-blue-600 text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <h5 class="text-lg font-semibold text-gray-800">Enviar por E-mail</h5>
                                    <p class="text-gray-600 text-sm">Envie o orçamento por e-mail com todos os detalhes</p>
                                </div>
                                <div class="w-6 h-6 border-2 border-gray-300 rounded-full flex items-center justify-center" id="email-radio">
                                    <div class="w-3 h-3 bg-green-600 rounded-full hidden" id="email-radio-selected"></div>
                                </div>
                            </div>
                        </div>

                        <!-- WhatsApp -->
                        <div class="border border-gray-200 rounded-lg p-4 hover:border-green-300 hover:bg-green-50 transition-all duration-200 cursor-pointer" onclick="selectSendMethod('whatsapp')">
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                                    <i class="fab fa-whatsapp text-green-600 text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <h5 class="text-lg font-semibold text-gray-800">Enviar por WhatsApp</h5>
                                    <p class="text-gray-600 text-sm">Envie o orçamento via WhatsApp com link para visualização</p>
                                </div>
                                <div class="w-6 h-6 border-2 border-gray-300 rounded-full flex items-center justify-center" id="whatsapp-radio">
                                    <div class="w-3 h-3 bg-green-600 rounded-full hidden" id="whatsapp-radio-selected"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Mensagem Personalizada (para e-mail) -->
                    <div id="custom-message-section" class="mt-6 hidden">
                        <label for="custom-message" class="block text-sm font-medium text-gray-700 mb-2">
                            Mensagem personalizada (opcional)
                        </label>
                        <textarea id="custom-message" rows="4" 
                                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 resize-none"
                                  placeholder="Digite uma mensagem personalizada para acompanhar o orçamento..."></textarea>
                    </div>
                </div>

                <!-- Footer -->
                <div class="bg-gray-50 px-6 py-4 border-t border-gray-200">
                    <div class="flex flex-col sm:flex-row gap-3">
                        <button id="cancel-send-budget" 
                                class="flex-1 px-6 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-all duration-200">
                            <i class="fas fa-times mr-2"></i>Cancelar
                        </button>
                        <button id="confirm-send-budget" 
                                class="flex-1 px-6 py-3 text-white bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"
                                disabled>
                            <i class="fas fa-paper-plane mr-2"></i>Enviar Orçamento
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Visualização de Imagem -->
    <div id="image-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4 py-4">
            <!-- Overlay -->
            <div class="fixed inset-0 transition-opacity bg-black bg-opacity-90" id="image-modal-overlay"></div>

            <!-- Modal Content -->
            <div class="relative w-full max-w-7xl p-0 overflow-hidden text-left align-middle transition-all transform shadow-xl rounded-2xl bg-transparent">
                <!-- Header -->
                <div class="absolute top-4 right-4 z-10">
                    <button id="close-image-modal" class="w-10 h-10 bg-black bg-opacity-70 hover:bg-opacity-90 text-white rounded-full flex items-center justify-center transition-all duration-200 backdrop-blur-sm">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <!-- Content -->
                <div class="p-4 text-center">
                    <img id="modal-image" src="" alt="Imagem" class="max-w-full max-h-[90vh] mx-auto rounded-lg shadow-2xl" style="object-fit: contain; width: auto; height: auto;">
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Confirmação de Exclusão -->
    <div id="delete-service-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4 py-4">
            <!-- Overlay -->
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" id="delete-service-modal-overlay"></div>

            <!-- Modal Content -->
            <div class="relative w-full max-w-md p-0 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl">
                <!-- Header -->
                <div class="bg-gradient-to-r from-red-600 to-red-700 px-6 py-4">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                            <i class="fas fa-exclamation-triangle text-white text-lg"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-white">Confirmar Exclusão</h3>
                            <p class="text-red-100 text-sm">Esta ação não pode ser desfeita</p>
                        </div>
                    </div>
                </div>

                <!-- Content -->
                <div class="p-6">
                    <p class="text-gray-700 mb-6">Tem certeza que deseja excluir este serviço do seu portfólio?</p>
                    
                    <!-- Botões -->
                    <div class="flex flex-col sm:flex-row gap-3">
                        <button type="button" id="cancel-delete-service" 
                                class="flex-1 px-6 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-all duration-200">
                            <i class="fas fa-times mr-2"></i>Cancelar
                        </button>
                        <button type="button" id="confirm-delete-service"
                                class="flex-1 px-6 py-3 text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 rounded-lg font-medium transition-all duration-200 transform hover:scale-105">
                            <i class="fas fa-trash mr-2"></i>Excluir
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Editor de Imagem -->
    <div id="image-editor-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <!-- Overlay -->
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" id="image-editor-modal-overlay"></div>

            <!-- Modal Content -->
            <div class="inline-block w-full max-w-4xl p-0 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl">
                <!-- Header -->
                <div class="bg-gradient-to-r from-indigo-600 to-purple-700 px-6 py-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                <i class="fas fa-crop text-white text-lg"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-white">Editor de Imagem</h3>
                                <p class="text-indigo-100 text-sm">Ajuste zoom, posição e corte da imagem</p>
                            </div>
                        </div>
                        <button id="close-image-editor-modal" class="text-white hover:text-gray-200 transition-colors duration-200">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                </div>

                <!-- Content -->
                <div class="p-6">
                    <!-- Controles de Edição -->
                    <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                        <!-- Painel de Controles -->
                        <div class="lg:col-span-1">
                            <div class="space-y-6">
                                <!-- Controle de Zoom -->
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h4 class="text-sm font-semibold text-gray-800 mb-3 flex items-center">
                                        <i class="fas fa-search-plus mr-2 text-indigo-600"></i>
                                        Zoom
                                    </h4>
                                    <div class="space-y-3">
                                        <div>
                                            <label class="block text-xs text-gray-600 mb-1">Nível de Zoom</label>
                                            <input type="range" id="zoom-slider" min="50" max="200" value="100" 
                                                   class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                                <span>50%</span>
                                                <span id="zoom-value">100%</span>
                                                <span>200%</span>
                                            </div>
                                        </div>
                                        <div class="flex space-x-2">
                                            <button id="zoom-out" class="flex-1 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors duration-200 text-sm">
                                                <i class="fas fa-search-minus mr-1"></i>Menos
                                            </button>
                                            <button id="zoom-reset" class="flex-1 px-3 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 text-sm">
                                                <i class="fas fa-expand-arrows-alt mr-1"></i>Reset
                                            </button>
                                            <button id="zoom-in" class="flex-1 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors duration-200 text-sm">
                                                <i class="fas fa-search-plus mr-1"></i>Mais
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Controle de Posição -->
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h4 class="text-sm font-semibold text-gray-800 mb-3 flex items-center">
                                        <i class="fas fa-arrows-alt mr-2 text-indigo-600"></i>
                                        Posição
                                    </h4>
                                    <div class="space-y-3">
                                        <div class="grid grid-cols-3 gap-2">
                                            <button id="pos-top-left" class="p-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors duration-200">
                                                <i class="fas fa-arrow-up text-xs"></i>
                                                <i class="fas fa-arrow-left text-xs ml-1"></i>
                                            </button>
                                            <button id="pos-top" class="p-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors duration-200">
                                                <i class="fas fa-arrow-up"></i>
                                            </button>
                                            <button id="pos-top-right" class="p-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors duration-200">
                                                <i class="fas fa-arrow-up text-xs"></i>
                                                <i class="fas fa-arrow-right text-xs ml-1"></i>
                                            </button>
                                            <button id="pos-left" class="p-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors duration-200">
                                                <i class="fas fa-arrow-left"></i>
                                            </button>
                                            <button id="pos-center" class="p-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors duration-200">
                                                <i class="fas fa-crosshairs"></i>
                                            </button>
                                            <button id="pos-right" class="p-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors duration-200">
                                                <i class="fas fa-arrow-right"></i>
                                            </button>
                                            <button id="pos-bottom-left" class="p-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors duration-200">
                                                <i class="fas fa-arrow-down text-xs"></i>
                                                <i class="fas fa-arrow-left text-xs ml-1"></i>
                                            </button>
                                            <button id="pos-bottom" class="p-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors duration-200">
                                                <i class="fas fa-arrow-down"></i>
                                            </button>
                                            <button id="pos-bottom-right" class="p-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors duration-200">
                                                <i class="fas fa-arrow-down text-xs"></i>
                                                <i class="fas fa-arrow-right text-xs ml-1"></i>
                                            </button>
                                        </div>
                                        <div class="text-xs text-gray-500">
                                            <p>Clique nos botões para reposicionar a imagem</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Controle de Corte -->
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h4 class="text-sm font-semibold text-gray-800 mb-3 flex items-center">
                                        <i class="fas fa-crop mr-2 text-indigo-600"></i>
                                        Corte
                                    </h4>
                                    <div class="space-y-3">
                                        <div class="grid grid-cols-2 gap-2">
                                            <button id="crop-square" class="p-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors duration-200 text-sm">
                                                <i class="fas fa-square mr-1"></i>Quadrado
                                            </button>
                                            <button id="crop-16-9" class="p-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors duration-200 text-sm">
                                                <i class="fas fa-tv mr-1"></i>16:9
                                            </button>
                                            <button id="crop-4-3" class="p-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors duration-200 text-sm">
                                                <i class="fas fa-tablet mr-1"></i>4:3
                                            </button>
                                            <button id="crop-original" class="p-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors duration-200 text-sm">
                                                <i class="fas fa-image mr-1"></i>Original
                                            </button>
                                        </div>
                                        <div class="text-xs text-gray-500">
                                            <p>Selecione um formato de corte</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Controles Gerais -->
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h4 class="text-sm font-semibold text-gray-800 mb-3 flex items-center">
                                        <i class="fas fa-cog mr-2 text-indigo-600"></i>
                                        Ações
                                    </h4>
                                    <div class="space-y-2">
                                        <button id="rotate-left" class="w-full p-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors duration-200 text-sm">
                                            <i class="fas fa-undo mr-2"></i>Rotacionar Esquerda
                                        </button>
                                        <button id="rotate-right" class="w-full p-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors duration-200 text-sm">
                                            <i class="fas fa-redo mr-2"></i>Rotacionar Direita
                                        </button>
                                        <button id="flip-horizontal" class="w-full p-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors duration-200 text-sm">
                                            <i class="fas fa-arrows-alt-h mr-2"></i>Virar Horizontal
                                        </button>
                                        <button id="reset-image" class="w-full p-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors duration-200 text-sm">
                                            <i class="fas fa-undo-alt mr-2"></i>Resetar Imagem
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Área de Visualização -->
                        <div class="lg:col-span-3">
                            <div class="bg-gray-100 rounded-lg p-4 min-h-[400px] flex items-center justify-center">
                                <div id="image-editor-container" class="relative overflow-hidden bg-white rounded-lg shadow-lg max-w-full max-h-full">
                                    <canvas id="image-editor-canvas" class="max-w-full max-h-full"></canvas>
                                </div>
                            </div>
                            
                            <!-- Preview do Resultado -->
                            <div class="mt-4 bg-gray-50 rounded-lg p-4">
                                <h5 class="text-sm font-semibold text-gray-800 mb-3">Preview do Resultado</h5>
                                <div class="bg-white rounded-lg p-3 border-2 border-dashed border-gray-300">
                                    <div id="image-preview-result" class="w-full h-32 bg-gray-100 rounded flex items-center justify-center overflow-hidden">
                                        <span class="text-gray-500 text-sm">Preview da imagem editada</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Botões de Ação -->
                    <div class="flex flex-col sm:flex-row gap-3 pt-6 border-t border-gray-200 mt-6">
                        <button type="button" id="cancel-image-edit" 
                                class="flex-1 px-6 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-all duration-200">
                            <i class="fas fa-times mr-2"></i>Cancelar
                        </button>
                        <button type="button" id="apply-image-edit"
                                class="flex-1 px-6 py-3 text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 rounded-lg font-medium transition-all duration-200 transform hover:scale-105">
                            <i class="fas fa-check mr-2"></i>Aplicar Alterações
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Suporte/Feedback -->
    <div id="support-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <!-- Overlay -->
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" id="support-modal-overlay"></div>

            <!-- Modal Content -->
            <div class="inline-block w-full max-w-2xl p-0 my-4 md:my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl mx-4">
                <!-- Header -->
                <div class="bg-gradient-to-r from-indigo-600 to-purple-700 px-6 py-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                <i class="fas fa-headset text-white text-lg"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-white">Central de Suporte</h3>
                                <p class="text-indigo-100 text-sm">Relate problemas ou envie feedback</p>
                            </div>
                        </div>
                        <button id="close-support-modal" class="text-white hover:text-gray-200 transition-colors duration-200">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                </div>

                <!-- Form -->
                <form id="support-form" class="p-4 md:p-6 space-y-4 md:space-y-6">
                    <!-- Título -->
                    <div class="space-y-2">
                        <label for="support-title" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-heading mr-2 text-indigo-600"></i>Título do Problema *
                        </label>
                        <input type="text" id="support-title" name="title" required maxlength="100"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200"
                               placeholder="Resumo breve do problema (ex: Erro ao salvar orçamento)">
                        <p class="text-xs text-gray-500">
                            <i class="fas fa-info-circle mr-1"></i>Seja claro e objetivo
                        </p>
                    </div>

                    <!-- Descrição -->
                    <div class="space-y-2">
                        <label for="support-description" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-align-left mr-2 text-indigo-600"></i>Descrição Detalhada *
                        </label>
                        <textarea id="support-description" name="description" rows="6" required
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 resize-none"
                                  placeholder="Descreva o problema em detalhes:&#10;- O que você estava tentando fazer?&#10;- O que aconteceu?&#10;- Quando ocorreu?&#10;- Já tentou alguma solução?"></textarea>
                        <p class="text-xs text-gray-500">
                            <i class="fas fa-info-circle mr-1"></i>Quanto mais detalhes, melhor poderemos ajudar
                        </p>
                    </div>

                    <!-- Upload de Anexo -->
                    <div class="space-y-2">
                        <label for="support-attachment" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-paperclip mr-2 text-indigo-600"></i>Anexar Imagem (Opcional)
                        </label>
                        <div class="flex items-center justify-center w-full">
                            <label for="support-attachment" class="flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors duration-200">
                                <div class="flex flex-col items-center justify-center pt-5 pb-6">
                                    <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                                    <p class="mb-2 text-sm text-gray-500">
                                        <span class="font-semibold">Clique para enviar</span> ou arraste
                                    </p>
                                    <p class="text-xs text-gray-500">PNG, JPG ou JPEG (MAX. 5MB)</p>
                                </div>
                                <input id="support-attachment" name="attachment" type="file" class="hidden" accept="image/*">
                            </label>
                        </div>
                        <!-- Preview do Anexo -->
                        <div id="support-preview" class="hidden mt-3">
                            <div class="relative inline-block">
                                <img id="support-preview-img" src="" alt="Preview" class="max-h-40 rounded-lg border border-gray-300">
                                <button type="button" id="remove-support-attachment" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 transition-colors">
                                    <i class="fas fa-times text-xs"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Mensagem de Confirmação -->
                    <div id="support-success-message" class="hidden p-4 bg-green-50 border border-green-200 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-green-600 text-2xl"></i>
                            <div>
                                <h4 class="text-green-800 font-semibold">Feedback enviado com sucesso!</h4>
                                <p class="text-green-700 text-sm">Nossa equipe analisará seu chamado em breve.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Botões -->
                    <div class="flex flex-col sm:flex-row gap-3 pt-4 border-t">
                        <button type="button" id="cancel-support" 
                                class="flex-1 px-4 md:px-6 py-2 md:py-3 text-sm md:text-base text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-all duration-200">
                            <i class="fas fa-times mr-2"></i>Cancelar
                        </button>
                        <button type="submit" id="send-support" 
                                class="flex-1 px-4 md:px-6 py-2 md:py-3 text-sm md:text-base text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 rounded-lg font-medium transition-all duration-200 transform hover:scale-105">
                            <i class="fas fa-paper-plane mr-2"></i>Enviar Feedback
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de Lançamento de Custos -->
    <div id="cost-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <!-- Overlay -->
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" id="cost-modal-overlay"></div>

            <!-- Modal Content -->
            <div class="inline-block w-full max-w-2xl p-0 my-4 md:my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl mx-4">
                <!-- Header -->
                <div class="bg-gradient-to-r from-emerald-600 to-teal-700 px-6 py-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                <i class="fas fa-calculator text-white text-lg"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-white">Lançar Custos do Projeto</h3>
                                <p class="text-emerald-100 text-sm">Informe os custos reais do projeto</p>
                            </div>
                        </div>
                        <button id="close-cost-modal" class="text-white hover:text-gray-200 transition-colors duration-200">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                </div>

                <!-- Form -->
                <form id="cost-form" class="p-4 md:p-6 space-y-4 md:space-y-6">
                    <!-- Informações do Projeto -->
                    <div class="bg-gray-50 rounded-lg p-4 mb-4">
                        <h4 class="font-semibold text-gray-800 mb-2">Informações do Projeto</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <div>
                                <span class="text-gray-600">Cliente:</span>
                                <span id="cost-modal-cliente" class="font-medium text-gray-800 ml-2">-</span>
                            </div>
                            <div>
                                <span class="text-gray-600">Data do Evento:</span>
                                <span id="cost-modal-data" class="font-medium text-gray-800 ml-2">-</span>
                            </div>
                            <div>
                                <span class="text-gray-600">Tipo de Serviço:</span>
                                <span id="cost-modal-servico" class="font-medium text-gray-800 ml-2">-</span>
                            </div>
                            <div>
                                <span class="text-gray-600">Local:</span>
                                <span id="cost-modal-local" class="font-medium text-gray-800 ml-2">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Preço de Venda (Read-only) -->
                    <div class="space-y-2">
                        <label for="cost-precio-venda" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-dollar-sign mr-2 text-emerald-600"></i>Preço de Venda
                        </label>
                        <input type="number" id="cost-precio-venda" step="0.01" readonly
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-600 cursor-not-allowed"
                               placeholder="0,00">
                        <p class="text-xs text-gray-500">
                            <i class="fas fa-info-circle mr-1"></i>Valor do orçamento aprovado (apenas leitura)
                        </p>
                    </div>

                    <!-- Custo Total Materiais -->
                    <div class="space-y-2">
                        <label for="cost-materiais" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-boxes mr-2 text-emerald-600"></i>Custo Total com Materiais *
                        </label>
                        <input type="number" id="cost-materiais" name="custo_total_materiais" step="0.01" required min="0"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-200"
                               placeholder="0,00">
                        <p class="text-xs text-gray-500">
                            <i class="fas fa-info-circle mr-1"></i>Gastos com balões, fitas, bases, etc.
                        </p>
                    </div>

                    <!-- Custo Total Mão de Obra -->
                    <div class="space-y-2">
                        <label for="cost-mao-obra" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-users mr-2 text-emerald-600"></i>Custo Total com Mão de Obra *
                        </label>
                        <input type="number" id="cost-mao-obra" name="custo_total_mao_de_obra" step="0.01" required min="0"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-200"
                               placeholder="0,00">
                        <p class="text-xs text-gray-500">
                            <i class="fas fa-info-circle mr-1"></i>Valor pago para montagem e instalação
                        </p>
                    </div>

                    <!-- Custos Diversos -->
                    <div class="space-y-2">
                        <label for="cost-diversos" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-car mr-2 text-emerald-600"></i>Outros Custos *
                        </label>
                        <input type="number" id="cost-diversos" name="custos_diversos" step="0.01" required min="0"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-200"
                               placeholder="0,00">
                        <p class="text-xs text-gray-500">
                            <i class="fas fa-info-circle mr-1"></i>Combustível, frete, taxas, etc.
                        </p>
                    </div>

                    <!-- Observações -->
                    <div class="space-y-2">
                        <label for="cost-observacoes" class="block text-sm font-medium text-gray-700">
                            <i class="fas fa-sticky-note mr-2 text-emerald-600"></i>Observações (Opcional)
                        </label>
                        <textarea id="cost-observacoes" name="observacoes" rows="3"
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-200 resize-none"
                                  placeholder="Observações sobre os custos lançados..."></textarea>
                    </div>

                    <!-- Resumo de Cálculos -->
                    <div class="bg-emerald-50 border border-emerald-200 rounded-lg p-4">
                        <h4 class="font-semibold text-emerald-800 mb-3">Resumo dos Cálculos</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Custo Total do Projeto:</span>
                                <span id="cost-resumo-total" class="font-medium text-gray-800">R$ 0,00</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Lucro Real Líquido:</span>
                                <span id="cost-resumo-lucro" class="font-medium text-emerald-600">R$ 0,00</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Margem de Lucro:</span>
                                <span id="cost-resumo-margem" class="font-medium text-emerald-600">0%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Mensagem de Sucesso -->
                    <div id="cost-success-message" class="hidden p-4 bg-green-50 border border-green-200 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-green-600 text-2xl"></i>
                            <div>
                                <h4 class="text-green-800 font-semibold">Custos lançados com sucesso!</h4>
                                <p class="text-green-700 text-sm">Os dados do dashboard foram atualizados automaticamente.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Botões -->
                    <div class="flex flex-col sm:flex-row gap-3 pt-4 border-t">
                        <button type="button" id="cancel-cost" 
                                class="flex-1 px-4 md:px-6 py-2 md:py-3 text-sm md:text-base text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-all duration-200">
                            <i class="fas fa-times mr-2"></i>Cancelar
                        </button>
                        <button type="submit" id="save-cost" 
                                class="flex-1 px-4 md:px-6 py-2 md:py-3 text-sm md:text-base text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg font-medium transition-all duration-200">
                            <i class="fas fa-save mr-2"></i>Salvar Custos
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- FullCalendar JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
    
    <!-- Chart.js para gráficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- JavaScript -->
    <script src="../js/principal.js"></script>
    <script src="../js/painel-decorador.js"></script>
    <script>
        // Garantir que a proteção está ativa após carregar painel-decorador.js
        document.addEventListener('DOMContentLoaded', function() {
            if (window.authProtection) {
                window.authProtection.protectBrowserNavigation('decorator');
            }
        });
    </script>
</body>
</html>